<ul class="flex flex-col gap-9">
    {{ $type := .type }}
    {{ $sourceType := "" }}
    {{ $sourceTag := "" }}
    
    {{ range .range}}
        {{if $type }}
            {{ range .data.tags }}
                {{ $sourceTag = .tag }}
            {{ end }}
        {{ end }}
        <li>
            {{ if isset .Params "tags" }}
                <div>{{ .Type }}</div>
            {{ end }}
            {{ if $type }}
                {{ if eq .data.itemType "book" }}
                    {{ $sourceType = "bok" }}
                {{ else if eq .data.itemType "blogPost"}}
                    {{ $sourceType = "bloggartikkel" }}
                {{ else if eq .data.itemType "videoRecording"}}
                    {{ $sourceType = "video" }}
                {{ end }}
                <small>{{ $sourceType }}</small>
            {{ end }}
            <h2 class="text-2xl font-bold">
                {{/* If regular pages */}}
                {{ if .Title }}
                    <a href="{{ .RelPermalink }}">{{ .Title }}</a>
                {{ else if .data }}
                    <a href="{{.data.url}}" id={{ $sourceTag }}>{{.data.title}}</a> 
                {{/* If "lenker" page */}}
                {{ else }}
                    <a href="{{.link}}">{{.title}}</a> 
                {{ end }}
            </h2>
            {{ if eq .Type "l√¶ringslogg" }}
                {{.Content}}
            {{ end }}

            {{/* API-sider */}}
            {{ if not .Type }}
                {{ with .data }}
                    <ul>
                        {{ range .creators }}
                            <li>{{ .firstName }} {{ .lastName }}</li>
                        {{ end }}
                    </ul>
                {{ end }}
                {{ if .excerpt }}
                    <blockquote>
                        <p>
                            {{ .excerpt }}
                        </p>
                    </blockquote>
                    <div>
                        <a href="{{ .link }}">
                            {{ .domain }}
                        </a>
                    </div>
                {{ end }}
            {{ end }}
            {{ if $type}}
                <ul>
                    {{- range site.RegularPages -}}
                        {{ if in .RawContent $sourceTag }}
                            <li>
                                <a href="{{ .Page.Permalink }}">{{.Title}}</a>
                                <small>{{ .Type }}</small>
                                {{ partial "tags.html" .}}
                            </li>
                        {{ end }}
                    {{- end -}}
                </ul>
            {{ end }}
            {{/* Show tags if any */}}
            {{ if isset .Params "tags" }}
                {{ partial "tags.html" .}}
            {{ end }}
        </li>
    {{ end }}
</ul>
