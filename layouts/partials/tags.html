{{ $tags := "tekstemner" }} 
{{ $logs := "laeringsemner" }} 
{{ if .Param $tags }}
    {{ with .Param $tags }}
    {{ $range := .}}
        {{ range $index, $tag := . }} {{ with $.Site.GetPage (printf "/%s/%s"
  $tags $tag) -}}

        <a href="{{ .RelPermalink }}"> 
        {{ if eq (len $range) 1 }} 
            #{{ $tag }}</a>
         {{ else if and (eq (len $range) (add $index 1)) (ne $index 0) }}
            #{{ $tag }}</a>
        {{ else }}
        #{{ $tag }}</a>, 
        {{ end }}
  {{- end -}} {{- end -}}
{{ end }}
{{else if .Param $logs}}
    {{ with .Param $logs }}
    {{ $range := .}}
        {{ range $index, $tag := . }} {{ with $.Site.GetPage (printf "/%s/%s"
  $logs $tag) -}}

        <a href="{{ .RelPermalink }}"> 
        {{ if eq (len $range) 1 }} 
            #{{ $tag }}</a>
         {{ else if and (eq (len $range) (add $index 1)) (ne $index 0) }}
            #{{ $tag }}</a>
        {{ else }}
        #{{ $tag }}</a>, 
        {{ end }}
  {{- end -}} {{- end -}}
{{ end }}
{{end}}
